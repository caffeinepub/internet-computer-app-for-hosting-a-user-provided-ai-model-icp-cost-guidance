[
  {
    // Match all files by default
    match: "**/*",
    headers: {
      // Security headers
      "X-Content-Type-Options": "nosniff",
      "X-Frame-Options": "DENY",
      "Referrer-Policy": "strict-origin-when-cross-origin",
      
      // Content Security Policy - adjust as needed for your app
      "Content-Security-Policy": "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https://icp-api.io https://identity.ic0.app https://*.ic0.app;",
    },
    // Cache for 1 hour by default
    cache: {
      max_age: 3600,
    },
  },
  {
    // HTML files should not be cached (always fetch latest)
    match: "**/*.html",
    headers: {
      "Cache-Control": "no-cache, no-store, must-revalidate",
    },
    cache: {
      max_age: 0,
    },
  },
  {
    // JavaScript and CSS with hashes can be cached for a long time
    match: "**/*.{js,css,woff,woff2,ttf,eot,svg,png,jpg,jpeg,gif,webp,ico}",
    headers: {
      "Cache-Control": "public, max-age=31536000, immutable",
    },
    cache: {
      max_age: 31536000, // 1 year
    },
  },
  {
    // JSON files (like env.json) should not be cached
    match: "**/*.json",
    headers: {
      "Cache-Control": "no-cache",
    },
    cache: {
      max_age: 0,
    },
  },
]
