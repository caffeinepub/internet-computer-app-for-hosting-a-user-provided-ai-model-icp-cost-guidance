{
  "kind": "build_request",
  "title": "Prepare and deploy the dapp live on the Internet Computer (IC)",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-10",
      "text": "Add or update the projectâ€™s IC deployment configuration so the app can be deployed to the Internet Computer using dfx, including canister definitions for the Motoko backend and the frontend assets.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "deploy my app live on the IC."
        ]
      },
      "acceptanceCriteria": [
        "A `dfx deploy --network ic` from the repository root completes successfully and deploys all required canisters.",
        "The deployment configuration includes both the backend canister (Motoko) and a frontend assets canister that serves the built React app."
      ]
    },
    {
      "id": "REQ-11",
      "text": "Create a production deployment runbook (README-style documentation) that a developer can follow to deploy the app to mainnet IC, including prerequisites (dfx), build steps, deploy commands, and how to retrieve the live URL and canister IDs after deployment.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "deploy my app live on the IC."
        ]
      },
      "acceptanceCriteria": [
        "Documentation includes exact commands to: build the frontend, deploy to `--network ic`, and locate the deployed canister IDs.",
        "Documentation explains how to open the deployed frontend in a browser (the live assets canister URL) and sign in with Internet Identity on mainnet."
      ]
    },
    {
      "id": "REQ-12",
      "text": "Remove hardcoded deployment values that block a correct mainnet deployment by making funding status values derive from the deployed canister at runtime (e.g., canister principal and cycles balance) rather than fixed constants.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "deploy my app live on the IC."
        ]
      },
      "acceptanceCriteria": [
        "`getFundingStatus()` no longer returns a hardcoded canister ID and does not always return `cycles = 0`.",
        "When deployed to IC, the Funding page can display the actual deployed canister principal and a non-mocked cycles balance (assuming the caller has permission per existing authorization rules)."
      ]
    },
    {
      "id": "REQ-13",
      "text": "Ensure the deployed frontend communicates with the deployed backend canister on mainnet IC (not local), using the correct generated canister IDs for the `ic` network build.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "deploy my app live on the IC."
        ]
      },
      "acceptanceCriteria": [
        "After `dfx deploy --network ic`, the hosted frontend can call the backend canister successfully on mainnet (e.g., load authenticated pages after signing in).",
        "No frontend code relies on local-only canister IDs when built/deployed for the `ic` network."
      ]
    }
  ],
  "constraints": [
    "Backend must remain single-actor; all Motoko logic stays in `backend/main.mo` (create `backend/migration.mo` only if state migration is required).",
    "Do not edit any files under `frontend/src/components/ui` (read-only).",
    "Do not edit immutable frontend hook files: `frontend/src/hooks/useInternetIdentity.ts`, `frontend/src/hooks/useInternetIdentity.tsx`, `frontend/src/hooks/useActor.ts`, `frontend/src/main.tsx`. Compose around them instead."
  ],
  "nonGoals": [
    "Implementing a real (non-mock) AI inference runtime for frontier/container models on the IC.",
    "Adding a QR code deposit UX, ICP sweep/withdrawal flow, or low-fuel warning (these may be separate build items unless explicitly included in this deployment-focused change).",
    "Integrating third-party CI/CD providers (GitHub Actions, etc.) unless explicitly requested."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}